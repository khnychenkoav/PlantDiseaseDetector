# Архитектура проекта

## Введение
Проект "Распознавание дефектов растений" представляет собой систему, которая анализирует изображения растений, определяет их заболевания и предоставляет рекомендации по лечению и уходу. Система состоит из нескольких компонентов, которые взаимодействуют друг с другом через API.

## Основные компоненты

1. **Клиентская часть (Frontend)**
   - Написана на React.js.
   - Позволяет пользователям загружать изображения растений, получать результаты анализа и управлять схемами огорода.

2. **Серверная часть (Backend)**
   - Написана на Python с использованием FastAPI.
   - Обрабатывает запросы от клиента, выполняет анализ изображений и предоставляет рекомендации.

3. **Модель машинного обучения (ML Model)**
   - Использует TensorFlow или PyTorch для распознавания дефектов растений.
   - Обучена на специализированных наборах данных.

4. **База данных**
   - Используется PostgreSQL для хранения информации о пользователях, результатах анализа и рекомендациях.

5. **Хранилище изображений**
   - AWS S3 или MinIO для хранения загруженных изображений.

## Диаграмма архитектуры
```mermaid
graph TD
    A[Пользователь] -->|Загрузка изображения| B[Frontend]
    B -->|API Запрос| C[Backend]
    C -->|Запрос к модели| D[ML Model]
    C -->|Запрос к БД| E[PostgreSQL]
    C -->|Запрос к хранилищу| F[S3/MinIO]
    D -->|Результаты анализа| C
    E -->|Информация о лечении| C
    F -->|Изображения| C
    C -->|Ответ пользователю| B
```
### Или детальнее
```mermaid
graph TD
    %% Пользовательский поток
    A[Пользователь] -->|Загрузка изображения| B[Frontend]
    B -->|API Запрос - POST /upload| C[Backend]

    %% Поток обработки в Backend
    subgraph Backend
        C -->|Валидация изображения| C_validate[Validation Module]
        C_validate -->|Сохранение изображения| F[S3/MinIO]
        C -->|Запрос к модели - Анализ изображения| D[ML Model]
        D -->|Результаты анализа JSON| C_result[Result Handler]
        C -->|Запрос к БД - Болезни| E[PostgreSQL]
        C_result -->|Формирование ответа| C_response[Response Formatter]
    end

    %% ML Model взаимодействия
    subgraph ML_Model
        D -->|Модель на ONNX| D_onnx[trained_model.onnx]
        D -->|Функции предсказания| D_utils[Predict Module]
    end

    %% База данных и хранилище
    subgraph Data
        E -->|Информация о болезнях и рекомендациях| E_disease[Disease Table]
        E -->|Информация о пользователях| E_user[User Table]
        E -->|Данные о схемах сада| E_garden[Garden Table]
        F -->|Сохранение изображений пользователей| F_images[Image Storage]
    end

    %% Ответы пользователю
    C_response -->|Ответ API JSON| B
    B -->|Отображение результата и рекомендаций| G[Результат анализа и рекомендации]
    B -->|Дополнительные данные - карта сада| H[Карта сада]

    %% Интерактивность
    H -->|Запрос данных о растениях| C
    C -->|Информация о схемах сада| E_garden


```
## Детали реализации

### Клиентская часть
- Загружает изображения с помощью формы.
- Отображает результаты анализа в удобном интерфейсе.
- Управляет схемой огорода с визуализацией.

### Серверная часть
- **Модули:**
  - Модуль обработки изображений.
  - Модуль рекомендаций.
  - Модуль управления схемой огорода.
- Использует FastAPI для маршрутизации.

### Модель машинного обучения
- Предобучена на данных с дефектами растений.
- Оптимизирована для быстрого выполнения на сервере.

### База данных
- Хранит данные о пользователях, результатах анализа, растениях и рекомендациях.
- Спроектирована для минимизации задержек.

### Хранилище изображений
- Обеспечивает безопасное и долговечное хранение загруженных изображений.
